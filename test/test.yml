
---
applications:
- name: dataflow-server
  host: dataflow-server-535
  memory: 2G
  disk_quota: 2G
  instances: 1
  buildpack: java_buildpack_offline
  path: test/dataflow.jar

  env:
    SPRING_PROFILES_ACTIVE: cloud
    JBP_CONFIG_SPRING_AUTO_RECONFIGURATION: '{enabled: false}'
    JBP_CONFIG_OPEN_JDK_JRE: '{ jre: { version: 1.8.+ }}'   
    SPRING_APPLICATION_NAME: dataflow-server
    SPRING_CLOUD_SKIPPER_CLIENT_SERVER_URI: 'None'
    SPRING_DATASOURCE_URL: "jdbc://oracle:thin:123.456.78:1234/xe/dataflow"
    SPRING_DATASOURCE_USERNAME: test
    SPRING_DATASOURCE_PASSWORD: password
    SPRING_DATASOURCE_DRIVER_CLASS_NAME: com.oracle.jdbc.OracleDriver
    SPRING_CLOUD_DATAFLOW_FEATURES_STREAMS_ENABLED: True
    SPRING_CLOUD_DATAFLOW_FEATURES_TASKS_ENABLED: True
    SPRING_CLOUD_DATAFLOW_FEATURES_SCHEDULES_ENABLED: False
    spring.cloud.dataflow.applicationProperties.stream.trustCerts: uaa.mycf.org
    spring.cloud.dataflow.applicationProperties.task.trustCerts: uaa.mycf.org
    SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_AUTO_DELETE_MAVEN_ARTIFACTS: false
    SPRING_APPLICATION_JSON: |-
        {
             "maven": {
                  "remoteRepositories": {
                       "repo0": {
                            "url": "https://repo.spring.io/libs-snapshot"
                       }
                  }
             } ,
             "spring.cloud.dataflow.task.platform.cloudfoundry.accounts": {
                  "default": {
                       "connection": {
                            "url": "https://api.mycf.org",
                            "org": "org",
                            "space": "space",
                            "domain": "apps.mycf.org",
                            "username": "user",
                            "password": "password"
                       },
                       "deployment": {
                            "services": [
                                 "mysql"
                            ]
                       }
                  }
             } 
        }
  services:
    - mysql
